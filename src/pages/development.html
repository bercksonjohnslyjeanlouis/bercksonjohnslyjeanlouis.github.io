<section class="about section" x-cloak
         x-data="{ visible_projects : 4 }"
         x-init="$store.database.get_projects(); $store.database.get_menu(); to_top()">
    <div class="section-inner-g">
        <div class="content width-full">
            <template x-for="project in $store.database.projects.slice(0, visible_projects)">
                <div class="item mb-4">
                    <div class="card">
                        <div class="card-body">
                            <div class="d-flex flex-column align-items-center">
                                <div class="flex-grow-1 pt-1">
                                    <div class="mb-2 text-center">
                                        <span x-text="project.category" class="badge rounded-pill bg-dark"></span><br>
                                        <span x-text="project.title"></span><br>
                                        <h5 x-text="project.name"></h5>
                                    </div>
                                    <div class="width-full w-100 mt-2">
                                        <a :href="project.link" class="m-0 p-0" x-data="{i_load:false}">
                                            <div class="width-100 d-flex justify-content-center align-items-center text-center"
                                                 style="text-align: center">
                                                <div class="loader pt-4" x-show="!i_load">
                                                    <div class="loader-wheel"></div>
                                                    <div class="loader-text"></div>
                                                </div>
                                            </div>

                                            <img class="card-img-top m-0 p-0" :title="project.name"
                                                 :src="project.image" x-show="i_load"
                                                 :alt="project.name"  @load="i_load = true"
                                            >
<!--                                            <img :src="project.image" alt="" class="img-fluid project-image rounded shadow-sm">-->
                                        </a>
                                    </div>
                                    <div style="text-align: justify" class="mt-2">
                                        <span x-text="project.description" style="text-align: justify" class="d-block text-muted pt-2"></span>
                                    </div>
                                    <div class="text-center pt-3 pb-2">
                                        <a class="btn-1 btn-cta-primary-1"
                                           :href="project.link">
                                            EN SAVOIR PLUS SUR CE PROJET
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer py-0 border-top">
                            <div class="row">
                                <div class="col text-center p-3">
                                    <h4 class="fs-5 mb-1">+</h4>
                                    <span class="d-block font-size-sm">Contributeurs</span>
                                </div>

                                <div class="col p-3 text-center border-end border-start">
                                    <h4 class="fs-5 mb-1">+</h4>
                                    <span class="d-block font-size-sm">Status</span>
                                </div>

                                <div class="col p-3 text-center">
                                    <h4 class="fs-5 mb-1">+</h4>
                                    <span class="d-block font-size-sm">Languages</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </template>

            <div class="my-3 d-flex justify-content-center align-items-center text-center">
                <button x-show="visible_projects<$store.database.projects.length"
                        class="btn btn-cta-primary" @click="visible_projects+=4">
                    VOIR PLUS DE PROJETS +
                </button>
            </div>

            <div class="my-3 d-flex justify-content-center align-items-center text-center">
                <a x-show="visible_projects>=$store.database.projects.length"
                   class="btn btn-cta-primary"
                   href="https://www.linkedin.com/in/bercksonjohnslyjeanlouis">
                    CONSULTER MON PROFIL LINKEDIN
                </a>
            </div>

        </div><!--//content-->
        <div class="my-3 d-flex justify-content-center align-items-center text-center">
            <div class="loader" x-show="!$store.database.loaded_projects">
                <div class="loader-wheel"></div>
                <div class="loader-text"></div>
            </div>
        </div>
    </div><!--//section-inner-->
</section><!--//section-->